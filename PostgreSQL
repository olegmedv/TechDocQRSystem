‚óè üê≥ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É PostgreSQL –¥–ª—è TechDoc QR System

  –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

  1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Docker

  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Docker –∑–∞–ø—É—â–µ–Ω
  docker --version
  docker-compose --version

  # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
  docker ps

  2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞

  cd /path/to/TechDocQRSystem
  # –∏–ª–∏ –≤ Windows:
  cd C:\Users\olegm\source\repos\TechDocQRSystem

  üöÄ –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ PostgreSQL

  –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ backend –∏ frontend:

  1. –°–æ–∑–¥–∞–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–π docker-compose –¥–ª—è PostgreSQL

  # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ PostgreSQL —Å–µ—Ä–≤–∏—Å
  docker-compose up -d postgres

  2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ PostgreSQL –∑–∞–ø—É—Å—Ç–∏–ª—Å—è

  # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ PostgreSQL
  docker-compose logs postgres

  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
  docker ps | grep postgres

  –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
  CONTAINER ID   IMAGE         PORTS                    NAMES
  abc123def456   postgres:15   0.0.0.0:5432->5432/tcp   techdoc_postgres

  üåü –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–ø—É—Å–∫ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

  1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å—é —Å–∏—Å—Ç–µ–º—É

  # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã (PostgreSQL + Backend + Frontend)
  docker-compose up -d

  2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

  # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
  docker-compose ps

  # –ò–ª–∏ –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ
  docker ps

  –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å 3 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
  - techdoc_postgres - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
  - techdoc_backend - API —Å–µ—Ä–≤–µ—Ä
  - techdoc_frontend - –í–µ–± –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

  üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã PostgreSQL

  1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ PostgreSQL

  # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ PostgreSQL
  docker-compose logs postgres

  # –ò–ª–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
  docker-compose logs -f postgres

  –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
  postgres_1  | PostgreSQL init process complete; ready for start up.
  postgres_1  | 2024-01-01 12:00:00.000 UTC [1] LOG:  database system is ready to accept connections

  2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

  # –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL —á–µ—Ä–µ–∑ Docker
  docker exec -it techdoc_postgres psql -U techdoc_user -d techdocqr

  # –í–Ω—É—Ç—Ä–∏ PostgreSQL –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
  \dt  # –ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã
  \q   # –í—ã–π—Ç–∏

  üîó –°–ø–æ—Å–æ–±—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL

  1. –ß–µ—Ä–µ–∑ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–≤–Ω—É—Ç—Ä–∏ —Å–∏—Å—Ç–µ–º—ã)

  docker exec -it techdoc_postgres psql -U techdoc_user -d techdocqr

  2. –° –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω psql)

  psql -h localhost -p 5432 -U techdoc_user -d techdocqr
  # –ü–∞—Ä–æ–ª—å: techdoc_password123

  3. –ß–µ—Ä–µ–∑ pgAdmin (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

  –ó–∞–ø—É—Å—Ç–∏—Ç–µ pgAdmin –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:
  docker run -p 8080:80 \
    -e 'PGADMIN_DEFAULT_EMAIL=admin@example.com' \
    -e 'PGADMIN_DEFAULT_PASSWORD=admin' \
    -d dpage/pgadmin4

  –ó–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:8080
  - Email: admin@example.com
  - –ü–∞—Ä–æ–ª—å: admin

  –î–æ–±–∞–≤—å—Ç–µ —Å–µ—Ä–≤–µ—Ä PostgreSQL:
  - –ò–º—è: TechDoc QR System
  - –•–æ—Å—Ç: host.docker.internal (–∏–ª–∏ IP –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞)
  - –ü–æ—Ä—Ç: 5432
  - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: techdocqr
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: techdoc_user
  - –ü–∞—Ä–æ–ª—å: techdoc_password123

  4. –ß–µ—Ä–µ–∑ DBeaver –∏–ª–∏ –¥—Ä—É–≥–∏–µ –∫–ª–∏–µ–Ω—Ç—ã

  –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
  - –•–æ—Å—Ç: localhost
  - –ü–æ—Ä—Ç: 5432
  - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: techdocqr
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: techdoc_user
  - –ü–∞—Ä–æ–ª—å: techdoc_password123

  üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ

  1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

  docker exec -it techdoc_postgres psql -U techdoc_user -d techdocqr

  2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

  -- –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
  \dt

  -- –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã users
  \d users

  -- –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã documents
  \d documents

  -- –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã activity_logs
  \d activity_logs

  3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

  -- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  SELECT username, email, role, email_confirmed FROM users;

  -- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
  SELECT * FROM pg_extension WHERE extname IN ('uuid-ossp', 'pg_trgm');

  -- –í—ã–π—Ç–∏
  \q

  üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PostgreSQL

  –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PostgreSQL

  # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ PostgreSQL
  docker-compose stop postgres

  # –ò–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—é —Å–∏—Å—Ç–µ–º—É
  docker-compose down

  –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL

  # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ PostgreSQL
  docker-compose restart postgres

  # –ò–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—é —Å–∏—Å—Ç–µ–º—É
  docker-compose restart

  –£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ PostgreSQL (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)

  # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∏ —É–¥–∞–ª–∏—Ç—å volumes —Å –¥–∞–Ω–Ω—ã–º–∏
  docker-compose down -v

  # –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
  docker-compose up -d

  üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

  –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç 5432 —É–∂–µ –∑–∞–Ω—è—Ç

  # –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç
  netstat -tulpn | grep 5432
  # –∏–ª–∏ –≤ Windows:
  netstat -an | findstr 5432

  # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π PostgreSQL (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
  sudo systemctl stop postgresql
  # –∏–ª–∏ –≤ Windows –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–ª—É–∂–±—É PostgreSQL

  –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

  # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
  docker-compose logs postgres

  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ–±—Ä–∞–∑–∞
  docker pull postgres:15

  # –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
  docker-compose up -d --force-recreate postgres

  –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
  docker ps | grep postgres

  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  docker inspect techdoc_postgres | grep IPAddress

  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã
  docker port techdoc_postgres

  üì± –î–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞

  –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ PostgreSQL –∏ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã:

  –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

  - Frontend: http://localhost:4200
  - Backend API: http://localhost:5269
  - Swagger: http://localhost:5269/swagger

  –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞

  - Username: admin
  - Email: admin@yandex.ru
  - –ü–∞—Ä–æ–ª—å: admin123

  üîÑ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∑–∞–ø—É—Å–∫–∞

  # 1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
  cd TechDocQRSystem

  # 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
  docker-compose up -d

  # 3. –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (30-60 —Å–µ–∫—É–Ω–¥)
  docker-compose logs -f

  # 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
  curl http://localhost:5269/api/test/health

  # 5. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
  # http://localhost:4200

  –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è —Å–∏—Å—Ç–µ–º–∞ TechDoc QR —Å PostgreSQL –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö! üéâ